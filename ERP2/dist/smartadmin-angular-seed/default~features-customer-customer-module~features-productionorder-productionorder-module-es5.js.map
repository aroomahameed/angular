{"version":3,"sources":["webpack:///./src/app/features/store/customer/client/client.actions.ts","webpack:///./src/app/features/store/customer/client/client.effects.ts","webpack:///./src/app/features/store/customer/client/client.reducer.ts","webpack:///./src/app/features/store/customer/client/client.selectors.ts","webpack:///./src/app/features/store/customer/client/client.service.ts","webpack:///./src/app/features/store/customer/client/index.ts","webpack:///./src/app/features/store/customer/customer/customer.actions.ts","webpack:///./src/app/features/store/customer/customer/customer.effects.ts","webpack:///./src/app/features/store/customer/customer/customer.reducer.ts","webpack:///./src/app/features/store/customer/customer/customer.selectors.ts","webpack:///./src/app/features/store/customer/customer/customer.service.ts","webpack:///./src/app/features/store/customer/customer/index.ts"],"names":[],"mappings":"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","file":"default~features-customer-customer-module~features-productionorder-productionorder-module-es5.js","sourcesContent":["import {createAction, props} from '@ngrx/store';\r\n\r\nimport {Client} from './client';\r\n\r\nexport const loadClients = createAction(\r\n    '[Client/API] Load Clients'\r\n);\r\n\r\nexport const loadClientsSuccess = createAction(\r\n    '[Client/API] Load Clients Success',\r\n    props<{ data: Client[] }>(),\r\n);\r\n\r\nexport const addClient = createAction(\r\n    '[Client/API] Add Client',\r\n    props<{ data: Client }>(),\r\n);\r\n\r\nexport const addClientSuccess = createAction(\r\n    '[Client/API] Add Client Success',\r\n    props<{ data: Client }>(),\r\n);\r\n\r\n\r\nexport const deleteClient = createAction(\r\n    '[Client/API] Delete Client',\r\n    props<{ data: Client }>(),\r\n);\r\n\r\nexport const deleteClientSuccess = createAction(\r\n    '[Client/API] Delete Client Success',\r\n    props<{ id: string}>(),\r\n);\r\n\r\nexport const selectCurrentClientSuccess = createAction(\r\n    '[Client/API] Select Current Client',\r\n    props<{ data: Client }>(),\r\n);\r\n\r\n","import {Injectable} from '@angular/core';\r\nimport {Actions, createEffect, ofType} from '@ngrx/effects';\r\nimport {Store} from '@ngrx/store';\r\nimport {ClientService} from './client.service';\r\nimport {\r\n  addClient,\r\n  addClientSuccess,\r\n  deleteClient, deleteClientSuccess,\r\n  loadClients,\r\n  loadClientsSuccess,\r\n} from './client.actions';\r\nimport {filter, map, mergeMap, withLatestFrom} from 'rxjs/operators';\r\nimport {allClientLoaded} from './client.selectors';\r\n\r\n\r\n@Injectable()\r\nexport class ClientEffects {\r\n\r\n    loadClients$ = createEffect(() => this.actions$.pipe(\r\n        ofType(loadClients),\r\n        withLatestFrom(this.store.select(allClientLoaded)),\r\n        filter(([_, allLoaded]) => !allLoaded),\r\n        mergeMap(_ => this.service.findAll().pipe(\r\n            map(data => loadClientsSuccess({data})),\r\n        )),\r\n    ));\r\n\r\n    addClient$ = createEffect(() => this.actions$.pipe(\r\n        ofType(addClient),\r\n        mergeMap(action => this.service.save(action.data).pipe(\r\n            map(data => addClientSuccess({data})),\r\n        )),\r\n    ));\r\n\r\n    deleteClient$ = createEffect(() => this.actions$.pipe(\r\n        ofType(deleteClient),\r\n        mergeMap(({data}) => this.service.delete(data).pipe(\r\n            map(_ => deleteClientSuccess({id: data.id})),\r\n        )),\r\n    ));\r\n\r\n    constructor(private actions$: Actions, private store: Store<any>, private service: ClientService) {\r\n    }\r\n\r\n}\r\n","import {Action, createReducer, on} from '@ngrx/store';\r\nimport {EntityState, EntityAdapter, createEntityAdapter} from '@ngrx/entity';\r\nimport {Client} from './client';\r\nimport * as ClientActions from './client.actions';\r\n\r\nexport const clientFeatureKey = 'clients';\r\n\r\nexport interface ClientState extends EntityState<Client> {\r\n    allClientsLoaded: boolean;\r\n    currentClient: Client\r\n}\r\n\r\nexport const adapter: EntityAdapter<Client> = createEntityAdapter<Client>();\r\n\r\nexport const initialState: ClientState = adapter.getInitialState({\r\n    allClientsLoaded: false,\r\n    currentClient: null\r\n});\r\n\r\nconst clientReducer = createReducer(\r\n    initialState,\r\n    on(ClientActions.addClientSuccess,\r\n        (state, action) => adapter.upsertOne(action.data, {...state, currentClient: action.data}),\r\n    ),\r\n    on(ClientActions.deleteClientSuccess,\r\n        (state, action) => adapter.removeOne(action.id, state),\r\n    ),\r\n\r\n    on(ClientActions.loadClientsSuccess,\r\n        (state, action) => adapter.addAll(action.data, state),\r\n    ),\r\n    on(ClientActions.selectCurrentClientSuccess,\r\n        (state, action) => ({...state, currentClient: action.data}),\r\n    ),\r\n);\r\n\r\nexport function reducer(state: ClientState | undefined, action: Action) {\r\n    return clientReducer(state, action);\r\n}\r\n\r\nexport const {\r\n    selectIds,\r\n    selectEntities,\r\n    selectAll,\r\n    selectTotal,\r\n} = adapter.getSelectors();\r\n","import {createFeatureSelector, createSelector} from '@ngrx/store';\r\nimport {ClientState, clientFeatureKey, selectAll} from './client.reducer';\r\n\r\nconst featureState = createFeatureSelector<ClientState>(clientFeatureKey);\r\n\r\nexport const selectAllClients = createSelector(\r\n    featureState,\r\n    selectAll,\r\n);\r\n\r\nexport const allClientLoaded = createSelector(\r\n    featureState,\r\n    state => state.allClientsLoaded,\r\n);\r\n\r\nexport const selectCurrentClient = createSelector(\r\n    featureState,\r\n    state => state.currentClient\r\n)\r\n\r\n","import {Injectable} from '@angular/core';\r\nimport {APP_CONFIG} from '../../../../app.config';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {Client} from './client';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class ClientService {\r\n    private url = `${APP_CONFIG.BASE_URL}/clients/`;\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    findAll(): Observable<Client[]> {\r\n        return this.http.get<Client[]>(this.url);\r\n    }\r\n\r\n    save(item: Client): Observable<Client> {\r\n        if (!item.id) {\r\n            return this.http.post<Client>(this.url, item);\r\n        } else {\r\n            return this.update(item);\r\n        }\r\n    }\r\n\r\n    private update(item: Client): Observable<Client> {\r\n        return this.http.put<Client>(`${this.url}${item.id}/`, item);\r\n    }\r\n\r\n    delete(item: Client) {\r\n        return this.http.delete(`${this.url}${item.id}/`);\r\n    }\r\n}\r\n","export * from './client';\r\nexport * from './client.effects';\r\nexport * from './client.service';\r\nexport * from './client.selectors';\r\nexport * from './client.reducer';\r\nexport * from './client.actions';\r\n","import {createAction, props} from '@ngrx/store';\r\n\r\nimport {Customer} from './customer';\r\n\r\nexport const loadCustomers = createAction(\r\n    '[Customer/API] Load Customers'\r\n);\r\n\r\nexport const loadCustomersSuccess = createAction(\r\n    '[Customer/API] Load Customers Success',\r\n    props<{ data: Customer[] }>(),\r\n);\r\n\r\nexport const addCustomer = createAction(\r\n    '[Customer/API] Add Customer',\r\n    props<{ data: Customer }>(),\r\n);\r\n\r\nexport const addCustomerSuccess = createAction(\r\n    '[Customer/API] Add Customer Success',\r\n    props<{ data: Customer }>(),\r\n);\r\n\r\n\r\nexport const deleteCustomer = createAction(\r\n    '[Customer/API] Delete Customer',\r\n    props<{ data: Customer }>(),\r\n);\r\n\r\nexport const deleteCustomerSuccess = createAction(\r\n    '[Customer/API] Delete Customer Success',\r\n    props<{ id: string}>(),\r\n);\r\n\r\nexport const selectCurrentCustomerSuccess = createAction(\r\n    '[Customer/API] Select Current Customer',\r\n    props<{ data: Customer }>(),\r\n);\r\n\r\n","import {Injectable} from '@angular/core';\r\nimport {Actions, createEffect, ofType} from '@ngrx/effects';\r\nimport {Store} from '@ngrx/store';\r\nimport {CustomerService} from './customer.service';\r\nimport {\r\n  addCustomer,\r\n  addCustomerSuccess,\r\n  deleteCustomer, deleteCustomerSuccess,\r\n  loadCustomers,\r\n  loadCustomersSuccess,\r\n} from './customer.actions';\r\nimport {filter, map, mergeMap, withLatestFrom} from 'rxjs/operators';\r\nimport {allCustomerLoaded} from './customer.selectors';\r\n\r\n\r\n@Injectable()\r\nexport class CustomerEffects {\r\n\r\n    loadCustomers$ = createEffect(() => this.actions$.pipe(\r\n        ofType(loadCustomers),\r\n        withLatestFrom(this.store.select(allCustomerLoaded)),\r\n        filter(([_, allLoaded]) => !allLoaded),\r\n        mergeMap(_ => this.service.findAll().pipe(\r\n            map(data => loadCustomersSuccess({data})),\r\n        )),\r\n    ));\r\n\r\n    addCustomer$ = createEffect(() => this.actions$.pipe(\r\n        ofType(addCustomer),\r\n        mergeMap(action => this.service.save(action.data).pipe(\r\n            map(data => addCustomerSuccess({data})),\r\n        )),\r\n    ));\r\n\r\n    deleteCustomer$ = createEffect(() => this.actions$.pipe(\r\n        ofType(deleteCustomer),\r\n        mergeMap(({data}) => this.service.delete(data).pipe(\r\n            map(_ => deleteCustomerSuccess({id: data.id})),\r\n        )),\r\n    ));\r\n\r\n    constructor(private actions$: Actions, private store: Store<any>, private service: CustomerService) {\r\n    }\r\n\r\n}\r\n","import {Action, createReducer, on} from '@ngrx/store';\r\nimport {EntityState, EntityAdapter, createEntityAdapter} from '@ngrx/entity';\r\nimport {Customer} from './customer';\r\nimport * as CustomerActions from './customer.actions';\r\n\r\nexport const customerFeatureKey = 'customers';\r\n\r\nexport interface CustomerState extends EntityState<Customer> {\r\n    allCustomersLoaded: boolean;\r\n    currentCustomer: Customer\r\n}\r\n\r\nexport const adapter: EntityAdapter<Customer> = createEntityAdapter<Customer>();\r\n\r\nexport const initialState: CustomerState = adapter.getInitialState({\r\n    allCustomersLoaded: false,\r\n    currentCustomer: null\r\n});\r\n\r\nconst customerReducer = createReducer(\r\n    initialState,\r\n    on(CustomerActions.addCustomerSuccess,\r\n        (state, action) => adapter.upsertOne(action.data, {...state, currentCustomer: action.data}),\r\n    ),\r\n    on(CustomerActions.deleteCustomerSuccess,\r\n        (state, action) => adapter.removeOne(action.id, state),\r\n    ),\r\n\r\n    on(CustomerActions.loadCustomersSuccess,\r\n        (state, action) => adapter.addAll(action.data, state),\r\n    ),\r\n    on(CustomerActions.selectCurrentCustomerSuccess,\r\n        (state, action) => ({...state, currentCustomer: action.data}),\r\n    ),\r\n);\r\n\r\nexport function reducer(state: CustomerState | undefined, action: Action) {\r\n    return customerReducer(state, action);\r\n}\r\n\r\nexport const {\r\n    selectIds,\r\n    selectEntities,\r\n    selectAll,\r\n    selectTotal,\r\n} = adapter.getSelectors();\r\n","import {createFeatureSelector, createSelector} from '@ngrx/store';\r\nimport {CustomerState, customerFeatureKey, selectAll} from './customer.reducer';\r\n\r\nconst featureState = createFeatureSelector<CustomerState>(customerFeatureKey);\r\n\r\nexport const selectAllCustomers = createSelector(\r\n    featureState,\r\n    selectAll,\r\n);\r\n\r\nexport const allCustomerLoaded = createSelector(\r\n    featureState,\r\n    state => state.allCustomersLoaded,\r\n);\r\n\r\nexport const selectCurrentCustomer = createSelector(\r\n    featureState,\r\n    state => state.currentCustomer\r\n)\r\n\r\n","import {Injectable} from '@angular/core';\r\nimport {APP_CONFIG} from '../../../../app.config';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {Customer} from './customer';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CustomerService {\r\n    private url = `${APP_CONFIG.BASE_URL}/customers/`;\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    findAll(): Observable<Customer[]> {\r\n        return this.http.get<Customer[]>(this.url);\r\n    }\r\n\r\n    save(item: Customer): Observable<Customer> {\r\n        if (!item.id) {\r\n            return this.http.post<Customer>(this.url, item);\r\n        } else {\r\n            return this.update(item);\r\n        }\r\n    }\r\n\r\n    private update(item: Customer): Observable<Customer> {\r\n        return this.http.put<Customer>(`${this.url}${item.id}/`, item);\r\n    }\r\n\r\n    delete(item: Customer) {\r\n        return this.http.delete(`${this.url}${item.id}/`);\r\n    }\r\n}\r\n","export * from './customer';\r\nexport * from './customer.effects';\r\nexport * from './customer.service';\r\nexport * from './customer.selectors';\r\nexport * from './customer.reducer';\r\nexport * from './customer.actions';\r\n"],"sourceRoot":""}